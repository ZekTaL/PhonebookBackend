(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),c=t.n(u),o=t(2),l=function(e){return r.a.createElement("form",{onSubmit:e.addPerson},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{align:"right"},"Name: "),r.a.createElement("td",null,r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),r.a.createElement("td",{rowSpan:"2"},r.a.createElement("button",{type:"submit"},"ADD"))),r.a.createElement("tr",null,r.a.createElement("td",{align:"right"},"Number: "),r.a.createElement("td",null,r.a.createElement("input",{value:e.newNumber,onKeyPress:e.isADigit,onChange:e.handleNumberChange}))))))},i=function(e){var n=e.person,t=e.deletePerson;return r.a.createElement("tr",null,r.a.createElement("td",{align:"right"},n.name),r.a.createElement("td",{align:"center"}," <> "),r.a.createElement("td",{align:"left"},n.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:t},"DELETE")))},s=t(3),m=t.n(s),d="/api/persons",f=function(){return m.a.get(d).then((function(e){return e.data}))},h=function(e){return m.a.post(d,e).then((function(e){return e.data}))},g=function(e,n){return m.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},E=function(e){return m.a.delete("".concat(d,"/").concat(e)).then((function(e){return e}))},p=function(e){var n=e.PersonsToShow,t=e.setPersons,a=e.setNotificationMessage;return r.a.createElement("table",null,r.a.createElement("tbody",null,n.map((function(e){return r.a.createElement(i,{key:e.name,person:e,deletePerson:function(){return function(e){var r=n.find((function(n){return n.id===e}));window.confirm("Delete ".concat(r.name,"?"))&&E(e).then((function(u){t(n.filter((function(n){return n.id!==e}))),a({message:"Deleted '".concat(r.name,"'"),type:"success"}),setTimeout((function(){a({message:null})}),5e3)})).catch((function(u){a({message:"'".concat(r.name,"' was already deleted from server"),type:"error"}),setTimeout((function(){a({message:null})}),5e3),t(n.filter((function(n){return n.id!==e})))}))}(e.id)}})}))))},b=function(e){return r.a.createElement("div",null,"Search: ",r.a.createElement("input",{value:e.newFilter,onChange:e.handleFilterChange}))},v=function(e){var n=e.notificationMessage;return null===n.message?null:r.a.createElement("div",{className:n.type},n.message)},w=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),i=Object(o.a)(c,2),s=i[0],m=i[1],d=Object(a.useState)(""),E=Object(o.a)(d,2),w=E[0],y=E[1],N=Object(a.useState)(""),C=Object(o.a)(N,2),j=C[0],O=C[1],P=Object(a.useState)({message:null,type:null}),S=Object(o.a)(P,2),T=S[0],D=S[1],k="error",A="success";Object(a.useEffect)((function(){f().then((function(e){u(e)}))}),[]);var F=""===j?t:t.filter((function(e){return e.name.toLowerCase().includes(j.toLowerCase())}));return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(v,{notificationMessage:T}),r.a.createElement(b,{newFilter:j,handleFilterChange:function(e){O(e.target.value)}}),r.a.createElement("h2",null,"Add New Person"),r.a.createElement(l,{addPerson:function(e){if(e.preventDefault(),""!==s&&""!==w){var n={name:s,number:w};if(t.map((function(e){return e.name})).includes(s)){var a=t.find((function(e){return e.name===s}));return a.name===n.name&&a.number===n.number?(D({message:"Error! You are adding a duplicate!",type:k}),void setTimeout((function(){D({message:null})}),5e3)):window.confirm("'".concat(s,"' is already added to phonebook! Replace the old number with the new one?"))?void g(a.id,n).then((function(e){u(t.map((function(n){return n.id!==a.id?n:e}))),D({message:"'".concat(a.name,"' updated!"),type:A}),setTimeout((function(){D({message:null})}),5e3),m(""),y("")})).catch((function(e){D({message:"The person '".concat(a.name,"' was already deleted from server"),type:k}),setTimeout((function(){D({message:null})}),5e3),u(t.filter((function(e){return e.id!==a.id})))})):void 0}h(n).then((function(e){u(t.concat(e)),D({message:"Added '".concat(e.name,"'"),type:A}),setTimeout((function(){D({message:null})}),5e3),m(""),y("")}))}else window.alert("Name or Number is empty!")},newName:s,handleNameChange:function(e){m(e.target.value)},newNumber:w,handleNumberChange:function(e){y(e.target.value)},isADigit:function(e){(e.charCode<48||e.charCode>57)&&45!==e.charCode&&e.preventDefault()}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(p,{PersonsToShow:F,setPersons:u,setNotificationMessage:D}))};t(36);c.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.9d8069cc.chunk.js.map